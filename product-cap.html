<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghost-Cap 4K Pro | Tactical Stealth Solutions</title>
    <meta name="description"
        content="Ghost-Cap 4K Pro – covert 4K surveillance cap with Vantablack lens, Wi-Fi streaming, and 3-hour battery. Engineered for absolute discretion.">
    <meta name="theme-color" content="#050505">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Oswald:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Product",
        "name": "Ghost-Cap 4K Pro",
        "description": "Covert 4K surveillance cap with Vantablack lens coating. Engineered for absolute discretion.",
        "brand": { "@type": "Brand", "name": "Tactical Stealth Solutions" },
        "offers": {
            "@type": "Offer",
            "priceCurrency": "EUR",
            "price": "550.00",
            "availability": "https://schema.org/InStock"
        }
    }
    </script>
    <script>if (sessionStorage.getItem('tss_access_granted') === 'true') { document.documentElement.classList.add('gate-bypassed') }</script>
    <style>
        .gate-bypassed #access-gate {
            display: none !important
        }

        .gate-bypassed .blur-content {
            filter: none !important;
            pointer-events: auto !important;
            opacity: 1 !important
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header id="site-header">
        <div class="container">
            <nav aria-label="Main navigation">
                <a href="index.html" class="logo" aria-label="TSS Home">TSS<span class="accent">.</span></a>
                <button class="hamburger" aria-label="Toggle menu" aria-expanded="false">
                    <span></span><span></span><span></span>
                </button>
                <ul class="nav-links" role="menubar">
                    <li role="none"><a href="index.html#products" class="nav-link" role="menuitem">Equipment</a></li>
                    <li role="none"><a href="manual.html" class="nav-link" role="menuitem">Manual</a></li>
                    <li role="none"><a href="index.html#contact" class="nav-link nav-link--accent"
                            role="menuitem">Secure Channel</a></li>
                    <li class="cart-trigger" role="none">
                        <span>Crate</span>
                        <div class="cart-count" aria-label="Cart items">0</div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Cart -->
    <div id="cart-overlay" class="cart-overlay" aria-hidden="true"></div>
    <aside id="cart-sidebar" class="cart-sidebar" aria-label="Shopping cart">
        <div class="cart-header">
            <h2>Supply Crate</h2>
            <button class="close-cart" aria-label="Close cart">×</button>
        </div>
        <div id="cart-items-container" class="cart-content"></div>
        <div class="cart-footer">
            <div class="cart-total-row">
                <span>Total</span>
                <span id="cart-total">0.00 €</span>
            </div>
            <button id="btn-shopify-checkout" class="checkout-btn">Proceed to Drop</button>
        </div>
    </aside>

    <!-- Access Gate -->
    <div id="access-gate" class="access-gate" role="dialog" aria-modal="true" aria-label="Access authentication">
        <div class="gate-content">
            <div class="gate-scanline"></div>
            <div class="logo-large">TSS<span class="accent">.</span></div>
            <h2>Restricted Access</h2>
            <p class="gate-subtitle">Authentication Required.</p>
            <div class="input-group">
                <input type="password" id="access-code" placeholder="ENTER CODE" aria-label="Access code"
                    autocomplete="off">
                <button id="access-btn" class="btn btn-primary">Decrypt</button>
            </div>
            <p id="error-msg" class="error-msg hidden">Access Denied.</p>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content" class="blur-content">
        <div class="container">
            <div class="product-hero" style="padding-top: calc(var(--spacing-xl) + 40px);">
                <div class="product-gallery" data-animate="fade-up">
                    <img src="assets/processed/product_cap_tactical.png"
                        alt="Ghost-Cap 4K Pro – front view showing concealed Vantablack lens" class="product-detail-img"
                        loading="lazy" width="600" height="600">
                    <img src="assets/processed/product_cap_inside_final.png"
                        alt="Ghost-Cap 4K Pro – internal electronics and camera module" class="product-detail-img"
                        style="margin-top: 20px;" loading="lazy" width="600" height="600">
                </div>

                <div class="product-details" data-animate="fade-up" style="--delay: 0.15s">
                    <a href="index.html#products" class="back-link">← Return to Portfolio</a>
                    <p class="section-tag">Ghost Series</p>
                    <h1 class="product-title">Ghost-Cap 4K Pro</h1>
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: var(--spacing-sm);">
                        Professional Grade</p>
                    <p class="product-price">1,00 €</p>

                    <p>Stay one step ahead with this tactical spy cap that hides a miniature HD camera inside the brim,
                        perfect for discreet evidence gathering, mystery shopping, or personal security. The lens is
                        almost invisible and aligned with your natural line of sight, so it records exactly what you are
                        looking at without awkward aiming or bulky gear. From the outside it's a classic all‑black
                        baseball cap with a clean front logo, blending seamlessly with casual streetwear or work
                        outfits.</p>
                    <br>
                    <p>Inside the hat, a compact DVR module and battery are concealed in a dedicated pouch, keeping all
                        electronics hidden and self‑contained with no external wires. Simply power it on, press record,
                        and the cap silently captures video and audio while you move through your day. Motion‑detection
                        recording helps save storage and battery by automatically starting when there is activity in
                        front of you. Ideal for indoor and outdoor use, the breathable fabric and adjustable strap
                        ensure comfortable wear for extended operations.</p>

                    <!-- Key Features -->
                    <h3 style="margin-top: var(--spacing-md); color: var(--accent-color); font-size: 1.1rem;">Key
                        Features</h3>
                    <ul
                        style="color: var(--text-secondary); font-size: 0.9rem; line-height: 2; padding-left: 1.2rem; margin-bottom: var(--spacing-md);">
                        <li>4K video livestream, perfect for exams!</li>
                        <li>Hidden pinhole lens in the brim for forward‑facing, eye‑level footage.</li>
                        <li>Built‑in rechargeable battery offering up to several hours of continuous recording (usage
                            dependent).</li>
                        <li>Internal DVR module with microSD card support (card not included in most models) for easy
                            file transfer.</li>
                        <li>Motion‑detection mode to trigger recording only when movement is detected in front of the
                            cap.</li>
                        <li>One‑size‑fits‑most adjustable strap for a secure, comfortable fit.</li>
                        <li>Discreet, unisex streetwear design suitable for travel, inspections, security work, and
                            undercover documentation.</li>
                    </ul>

                    <!-- Technical Specifications -->
                    <div class="spec-grid">
                        <div class="spec-item"><span class="spec-label">Resolution</span><span class="spec-value">4K AVI
                                (25–30 fps)</span></div>
                        <div class="spec-item"><span class="spec-label">Lens Angle</span><span
                                class="spec-value">90–120° Wide</span></div>
                        <div class="spec-item"><span class="spec-label">Storage</span><span class="spec-value">microSD /
                                TF Card</span></div>
                        <div class="spec-item"><span class="spec-label">Power</span><span class="spec-value">USB
                                Rechargeable</span></div>
                        <div class="spec-item"><span class="spec-label">Recording</span><span
                                class="spec-value">Continuous / Motion / Photo</span></div>
                        <div class="spec-item"><span class="spec-label">Discretion</span><span class="spec-value">Class
                                A (Undetectable)</span></div>
                    </div>

                    <!-- Ideal Use Cases -->
                    <h3 style="margin-top: var(--spacing-md); color: var(--accent-color); font-size: 1.1rem;">Ideal Use
                        Cases</h3>
                    <ul
                        style="color: var(--text-secondary); font-size: 0.9rem; line-height: 2; padding-left: 1.2rem; margin-bottom: var(--spacing-md);">
                        <li>Mystery shopping and customer‑service audits without attracting attention.</li>
                        <li>Private investigators and security professionals needing hands‑free recording in the field.
                        </li>
                        <li>Documenting meetings, deliveries, inspections, or travel incidents for your personal
                            records.</li>
                    </ul>

                    <!-- What's Included -->
                    <h3 style="color: var(--accent-color); font-size: 1.1rem;">What's Included</h3>
                    <ul
                        style="color: var(--text-secondary); font-size: 0.9rem; line-height: 2; padding-left: 1.2rem; margin-bottom: var(--spacing-md);">
                        <li>1 × Stealth Baseball Cap Spy Camera (integrated camera, DVR, and battery).</li>
                        <li>1 × USB charging/data cable.</li>
                        <li>1 × User guide with setup and operating instructions.</li>
                    </ul>

                    <p
                        style="color: var(--text-muted); font-size: 0.85rem; font-style: italic; margin-bottom: var(--spacing-md);">
                        Add this discreet spy cap to your gear today and capture the footage you need while looking like
                        you are just wearing an everyday hat.</p>

                    <div class="actions">
                        <button class="btn btn-primary add-to-cart" data-id="ghost_cap"
                            data-variant-id="gid://shopify/ProductVariant/53348593041741" data-name="Ghost-Cap 4K Pro"
                            data-price="550.00" id="btn-add-ghost-cap">
                            Add to Crate
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer id="site-footer">
        <div class="container">
            <div class="footer-inner">
                <div class="footer-brand">
                    <span class="logo">TSS<span class="accent">.</span></span>
                    <p>Tactical Stealth Solutions</p>
                </div>
                <nav class="footer-nav" aria-label="Footer navigation">
                    <a href="index.html#products">Equipment</a>
                    <a href="manual.html">Manual</a>
                    <a href="index.html#contact">Secure Channel</a>
                </nav>
            </div>
            <div class="footer-bottom">
                <p>© 2024 TSS. All rights reserved. Encrypted Connection.</p>
            </div>
        </div>
    </footer>

    <script src="cart.js"></script>
    <script src="main.js"></script>
    <script src="https://sdks.shopifycdn.com/js-buy-sdk/v2/latest/index.umd.min.js"></script>
    <script src="shopify-buy-custom.js"></script>
    <script type="module">
        import { db } from "./firebase-config.js";
        import { doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const btn = document.querySelector('.add-to-cart');
        const productId = 'ghost_cap';

        onSnapshot(doc(db, "inventory", productId), (docSnap) => {
            if (docSnap.exists()) {
                const data = docSnap.data();
                const qty = data.qty || 0;

                if (data.price) {
                    const formatPrice = data.price.toFixed(2).replace('.', ',') + ' €';
                    document.querySelector('.product-price').textContent = formatPrice;
                    btn.dataset.price = data.price.toFixed(2);
                }

                if (qty < 1) {
                    btn.disabled = true;
                    btn.textContent = 'OUT OF STOCK';
                    btn.style.background = '#333';
                    btn.style.borderColor = '#555';
                    btn.style.cursor = 'not-allowed';
                } else {
                    btn.disabled = false;
                    btn.textContent = 'Add to Crate';
                    btn.style.background = '';
                    btn.style.borderColor = '';
                    btn.style.cursor = 'pointer';
                }
            }
        });
    </script>
</body>

</html>